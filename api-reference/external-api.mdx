---
title: "External API's"
description: "Description of your new file."
---

Adoptâ€™s External API lets you integrate agentic functionality directly into your app or backend services â€” no UI embed required.

You can:

- Authenticate with client credentials
- Create conversations for end users
- Send messages and get AI responses (optionally streaming)
- List conversations with filters and pagination
- Fetch messages for a given conversation

## Base URLs

- **Swagger UI (interactive):** https://connect.adopt.ai/docs
- **OpenAPI (3.1) spec:** https://connect.adopt.ai/openapi.json

## Authentication

To call any API, youâ€™ll need a `clientId` and `secret`.

You can generate these from the **Adopt Platform**:

1. Go to `Settings â†’ Profile â†’ Personal Tokens`
2. Click **â€œGenerate Tokenâ€**
3. Copy the `clientId` and `secret`
4. Use them in the `/v1/auth/token` request below

> ðŸ’¡ You can manage and revoke tokens from the same page at any time.

All requests require a **JWT Bearer Token**.

First, exchange your client credentials for an access token using:

**POST** `/v1/auth/token`

**Request**

```bash
curl -sS https://connect.adopt.ai/v1/auth/token \
  -H "Content-Type: application/json" \
  -d '{"clientId":"YOUR_CLIENT_ID","secret":"YOUR_SECRET"}'
```

**Request body**

```json
{
  "clientId": "string",
  "secret": "string"
}
```

**Response**

```json
{
  "access_token": "string",
  "refresh_token": "string",
  "expires_in": 3600,
  "expires": "2025-09-05T12:00:00Z"
}
```

Use the token in the `Authorization` header:

```json
Authorization: Bearer <access_token>
```

## Actions

The **Actions** endpoints let you programmatically fetch a list of conversation actions and retrieve the messages tied to a specific action.\
These APIs are useful for building dashboards, monitoring workflows, or debugging agent executions associated with each action.

### List Conversation

**GET**`/v1/conversations/{conversation_id}/actions`

Retrieves all actions that have occurred within a given conversation.\
Supports pagination and filtering by key fields such as `status`, `type`, or timestamps.

**Request**

```bash
curl -sS "https://connect.adopt.ai/v1/conversations/conv_123/actions?page=1&limit=10" \
  -H "Authorization: Bearer $TOKEN"
```

**Response**

```json
{
  "actions": [
    {
      "action_id": "act_001",
      "conversation_id": "conv_123",
      "type": "fetch_vendor_invoices",
      "status": "executed",
      "initiated_at": "2025-09-05T10:00:00Z",
      "completed_at": "2025-09-05T10:00:03Z"
    }
  ],
  "total_count": 5,
  "has_next_page": false
}
```

**Query Parameters**

- `page` â€“ (integer) Page number (default: 1)
- `limit` â€“ (integer) Number of results per page (default: 20, max: 100)
- `status` â€“ (string, optional) Filter by action status (`initiated`, `executed`, `failed`)
- `type` â€“ (string, optional) Filter by action type
- `created_at_from`, `created_at_to` â€“ (ISO date, optional) Filter by creation time range

### Get Messages for a Conversation

**GET**`/v1/conversations/{conversation_id}/actions/{action_id}/messages`

Retrieves the full list of messages (user and assistant) associated with a specific conversation action.\
Useful for debugging multi-step actions and understanding agent reasoning or failure points.

**Request**

```bash
curl -sS "https://connect.adopt.ai/v1/conversations/conv_123/actions/act_001/messages" \
  -H "Authorization: Bearer $TOKEN"
```

**Response**

```json
{
  "action_id": "act_001",
  "messages": [
    {
      "message_id": "msg_101",
      "role": "user",
      "content": "Show me all pending invoices."
    },
    {
      "message_id": "msg_102",
      "role": "assistant",
      "content": "Here are your 5 pending vendor invoices."
    }
  ],
  "total_count": 2
}
```

#### Query Parameters

- `page` â€“ (integer) Page number (default: 1)
- `limit` â€“ (integer) Number of results per page (default: 20, max: 100)
- `role` â€“ (string, optional) Filter messages by role (`user`, `assistant`)
- `created_at_from`, `created_at_to` â€“ (ISO date, optional) Filter by message creation time ranges

### Run a Specific Action

**POST **`/v1/actions/run`

Triggers the execution of a specific action in the training or production pipeline.\
This endpoint is primarily used to test or replay agent actions manually with controlled parameters.

**Example Request**

```json
{
  "messages": [
    {
      "content": "string",
      "type": "system",
      "name": "string",
      "id": "string"
    },
    {
      "content": "string",
      "type": "human",
      "name": "string",
      "id": "string"
    },
    {
      "content": "string",
      "type": "ai",
      "name": "string",
      "id": "string",
      "tool_calls": [],
      "invalid_tool_calls": [],
      "usage_metadata": {
        "input_tokens": 0,
        "output_tokens": 0,
        "total_tokens": 0
      }
    }
  ],
  "trace_id": "14eafe6d-6880-4f1e-a6f5-9b8e3d304e53",
  "base_url": "",
  "workflow_params": {},
  "security_params": {},
  "user_message": "",
  "action_id": "",
  "fetch_latest_models": false,
  "application_base_url": "",
  "execution_type": "DEFAULT"
}
```

**Response**

```json
{
  "status": false,
  "message": "",
  "ai_message": {
    "content": "",
    "type": "ai",
    "tool_calls": [],
    "invalid_tool_calls": []
  }
}
```

### Error Handling

All endpoints return standardized error responses with proper HTTP status codes.\
A typical validation failure looks like:

```json
{
  "detail": [
    {
      "loc": ["path", "action_id"],
      "msg": "Action not found",
      "type": "value_error"
    }
  ]
}
```

## Conversations

### Create a conversation

**POST** `/v1/conversations/`\
Creates a new conversation for an end user.

```bash
curl -sS https://connect.adopt.ai/v1/conversations/ \
  -H "Authorization: Bearer $TOKEN"
```

**Response**

```json
{
  "conversation_id": "conv_123"
}
```

### List conversations (paginated)

**GET** `/v1/conversations/`

Query parameters:

- `page` (int, default `1`, min `1`)
- `limit` (int, default `20`, min `1`, max `100`)
- `created_at_from`, `created_at_to` (ISO date strings or `null`)
- `updated_at_from`, `updated_at_to` (ISO date strings or `null`)

```bash
curl -sS "https://connect.adopt.ai/v1/conversations/?page=1&limit=20" \
  -H "Authorization: Bearer $TOKEN"
```

**Response**

```json
{
  "conversations": [
    {
      "conversation_id": "conv_123",
      "created_at": "2025-09-05T10:00:00Z",
      "updated_at": "2025-09-05T11:00:00Z"
    }
  ],
  "total_count": 42,
  "has_next_page": true,
  "has_previous_page": false
}
```

## Messages

### Send a message

**POST** `/v1/conversations/{conversation_id}/messages`\
Adds a new message to an existing conversation and generates an AI response. Optionally stream the reply.

```bash
curl -sS https://connect.adopt.ai/v1/conversations/conv_123/messages \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
        "message_request": {
          "conversation_id":"conv_123",
          "message":"How do I reset my password?",
          "workflow_params":{"flow_id":"reset_password_v2"},
          "security_params":{"end_user_id":"user_789"}
        },
        "stream": false
      }'
```

**Request body**

```json
{
  "message_request": {
    "conversation_id": "conv_123",
    "message": "How do I reset my password?",
    "base_url": "",
    "app_base_url": "",
    "workflow_params": { "flow_id": "reset_password_v2" },
    "security_params": { "end_user_id": "user_789" },
    "additional_metadata_values": { "followups_clickable": true }
  },
  "stream": false
}
```

**Response**

```json
{
  "message_id": "msg_456",
  "conversation_id": "conv_123",
  "role": "assistant",
  "content": "You can reset your password from Settings â†’ Security..."
}
```

### Get conversation messages

**GET** `/v1/conversations/{conversation_id}/messages`\
Retrieves paginated messages for a conversation.

```bash
curl -sS https://connect.adopt.ai/v1/conversations/conv_123/messages \
  -H "Authorization: Bearer $TOKEN"
```

**Response**

```json
{
  "conversation_id": "conv_123",
  "messages": [
    {
      "message_id": "msg_001",
      "conversation_id": "conv_123",
      "role": "user",
      "content": "Hi",
      "created_at": "2025-09-05T10:00:00Z",
      "updated_at": "2025-09-05T10:00:00Z"
    }
  ],
  "total_count": 12,
  "has_next_page": false,
  "has_previous_page": true
}
```

## Errors

Validation failures return `422 Unprocessable Entity` with a standard structure:

```json
{
  "detail": [
    {
      "loc": ["body", "message_request", "message"],
      "msg": "Field required",
      "type": "value_error.missing"
    }
  ]
}
```

## End-to-end example

```json
# 1) Get token
TOKEN=$(curl -sS https://connect.adopt.ai/v1/auth/token \
  -H "Content-Type: application/json" \
  -d '{"clientId":"YOUR_CLIENT_ID","secret":"YOUR_SECRET"}' \
  | jq -r '.access_token')

# 2) Create conversation
CONV=$(curl -sS https://connect.adopt.ai/v1/conversations/ \
  -H "Authorization: Bearer $TOKEN")
CONV_ID=$(echo "$CONV" | jq -r '.conversation_id')

# 3) Send message
curl -sS https://connect.adopt.ai/v1/conversations/$CONV_ID/messages \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d "{\"message_request\": {\"conversation_id\":\"$CONV_ID\",\"message\":\"Hello!\"}}"
```

## Security

- **Scheme:** HTTP Bearer
- **Header:** `Authorization: Bearer <token>`
- Defined in OpenAPI as `JWTBearer`